<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Светлая тема -->
    <link rel="icon" href="index-file/favicon/favicon-light.png" type="image/png" media="(prefers-color-scheme: light)">
    <link rel="icon" href="index-file/favicon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <!-- Тёмная тема -->
    <link rel="icon" href="index-file/favicon/favicon-dark.png" type="image/png" media="(prefers-color-scheme: dark)">
    <link rel="icon" href="index-file/favicon/favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">


    <title>Web — Dev&Des</title>    
    <script>
    // function loadStylesheet() {
    //     var link = document.createElement("link");
    //     link.rel = "stylesheet";
    //     link.href = "index-file/styles.css?v=" + new Date().getTime();
    //     document.head.appendChild(link);
    // }

    // loadStylesheet();
</script>
<link rel="stylesheet" href="index-file/styles.css">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    

</head>
<body>
  <div class="chat-div">
    <div class="hi">
      <h1>How can I help?</h1>
      <p class="hi"><p>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
          const hiP = document.querySelector("p.hi");
          if (!hiP) {
            return;
          }
          const variants = [
            "I am an AI assistant created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button> to help you with web development.",
            "I am a virtual AI developed by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button> to quickly answer web development questions.",
            "Get quick web development tips with the help of an AI assistant created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button>.",
            "Got web development questions? I am an AI created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button>, ready to help."
          ];
            const randomText = variants[Math.floor(Math.random() * variants.length)];
            hiP.innerHTML = randomText;
          });
        </script>
    </div>
    <div id="chatbox"></div>
    <div class="chat-footer">
        <div class="mikhail-div">
          <button class="preset-button btn-secondary" data-text="view Mikhail's portfolio"><svg width="18" height="18" viewBox="0 0 40 40" fill="none">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5" d="M33.75 23.583v7.084c0 1.824-1.312 3.393-3.12 3.633-3.478.462-7.026.7-10.63.7-3.604 0-7.152-.238-10.63-.7-1.809-.24-3.12-1.81-3.12-3.633v-7.084m27.5 0c.786-.67 1.25-1.685 1.25-2.768v-6.306c0-1.801-1.28-3.358-3.062-3.624a80.185 80.185 0 00-5.688-.644m7.5 13.342c-.323.275-.7.492-1.121.633A39.959 39.959 0 0120 26.25a39.96 39.96 0 01-12.629-2.034 3.358 3.358 0 01-1.121-.633m0 0C5.463 22.913 5 21.898 5 20.815v-6.306c0-1.801 1.28-3.358 3.062-3.624a80.189 80.189 0 015.688-.644m12.5 0V8.75A3.75 3.75 0 0022.5 5h-5a3.75 3.75 0 00-3.75 3.75v1.49m12.5 0a81.147 81.147 0 00-12.5 0M20 21.25h.012v.012H20v-.012z"/></svg><span>Who I Am <span class="vertical-line-keyboard">|</span> Portfolio</span></button>
          <button class="preset-button btn-secondary" data-text="Send a message to Mikhail"><svg width="18" height="18" viewBox="0 0 40 40" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5" d="M14.375 16.25a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0h-.625m6.875 0a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0H20m6.875 0a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0h-.625m-22.5 5.016c0 2.668 1.872 4.99 4.512 5.379 1.81.266 3.64.472 5.488.614V35l6.973-6.973a1.9 1.9 0 011.296-.552 80.477 80.477 0 009.719-.83c2.64-.388 4.512-2.71 4.512-5.38v-10.03c0-2.67-1.872-4.992-4.512-5.38A80.656 80.656 0 0020 5c-3.987 0-7.906.292-11.738.855-2.64.388-4.512 2.71-4.512 5.38v10.03z"/></svg><span>Write to Mikhail</span></button>
          <button class="preset-button btn-secondary" data-text="Help Ukraine Achieve Peace and Freedom. Stand with Ukraine for its right to sovereignty and independence.">
<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.8571 7.15694C13.6177 5.17267 14.9051 4.83631 16 7.56602C11.2857 6.33979 14.7146 18.6123 2.28572 12.0659C0.571429 10.8397 5.71429 12.0464 7 10C0.571429 6.72835 6.19409 5.62438 1 3.88427C4.81028 2.19745 6.96052 2.73373 10.8571 7.15694Z" stroke="currentColor" stroke-width="1.57" stroke-linejoin="round"/>
<path d="M11 7C11.5 2.5 8.94738 2.22396 7 1.5L7.5 4" stroke="currentColor" stroke-width="1.57" stroke-linejoin="round"/>
</svg><span>Help Ukraine Achieve Peace and Freedom</span></button>
          <button class="preset-button btn-secondary not-send help-question" data-text="How to remove duplicates from an array in JavaScript?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to remove duplicates from an array in JavaScript?</span>
          <button class="preset-button btn-secondary not-send help-question" data-text="How to display the current date and time in Python?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to display the current date and time in Python?</span>
          <button class="preset-button btn-secondary not-send help-question" data-text="How to check if a file exists in PHP?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to check if a file exists in PHP?</span>
          </button>
        </div>
        <div class="userInput">
            <textarea id="userInput" autofocus placeholder="Enter your request..." oninput="toggleButtonState();"></textarea>
            <div class="userInputBTN">
                <div>
                    <button class="preset-button btn-secondary mikhail-btn" data-toltips="Menu & Help with commands" >
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M12 9a1 1 0 0 0-.879.522 1 1 0 0 1-1.754-.96A3 3 0 0 1 12 7c1.515 0 2.567 1.006 2.866 2.189.302 1.189-.156 2.574-1.524 3.258A.618.618 0 0 0 13 13a1 1 0 1 1-2 0c0-.992.56-1.898 1.447-2.342.455-.227.572-.618.48-.978C12.836 9.314 12.529 9 12 9Z" clip-rule="evenodd"></path><path d="M13.1 16a1.1 1.1 0 1 1-2.2 0 1.1 1.1 0 0 1 2.2 0Z"></path></svg><span>Help</span>
                    </button>

                    <button id="cancelStepsButton" class="btn-secondary cancel-button" data-toltips="Cancel message"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.63603 5.63604C6.02656 5.24552 6.65972 5.24552 7.05025 5.63604L12 10.5858L16.9497 5.63604C17.3403 5.24552 17.9734 5.24552 18.364 5.63604C18.7545 6.02657 18.7545 6.65973 18.364 7.05025L13.4142 12L18.364 16.9497C18.7545 17.3403 18.7545 17.9734 18.364 18.364C17.9734 18.7545 17.3403 18.7545 16.9497 18.364L12 13.4142L7.05025 18.364C6.65972 18.7545 6.02656 18.7545 5.63603 18.364C5.24551 17.9734 5.24551 17.3403 5.63603 16.9497L10.5858 12L5.63603 7.05025C5.24551 6.65973 5.24551 6.02657 5.63603 5.63604Z" fill="currentColor"></path></svg><span>Cancel</span></button>
                </div>
                <div>
                    <button onclick="sendMessage()" id="sendButtonMessage" class="btn-primary" data-toltips="Send text to chat" data-toltips-disabled="This is an empty message" disabled><span>Send</span><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-2xl"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z" fill="currentColor"></path></svg></button>
                </div>
            </div>
        </div>
      <p>The AI assistant may make mistakes. <button class="preset-button btn-link" data-text="contact Mikhail"><span>Contact Mikhail</span></button> — he will better understand your needs.</p>
    </div>
  </div>




<script>
  function loadConfig(callback) {
    var script = document.createElement("script");
    script.src = "index-file/config.js?v=" + new Date().getTime();
    script.onload = callback; // Ждём загрузки перед вызовом chat-gpt.js
    document.head.appendChild(script);
  }

  loadConfig(function(){
    var script = document.createElement("script");
    script.src = "index-file/chat-gpt.js?v=" + new Date().getTime();
    document.head.appendChild(script);
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    /* ============================================================
      Tooltip Functionality
    ============================================================ */
    const removeTooltip = function () {
      clearTimeout(this._tooltipTimeout);
      if (this._tooltip) {
        document.body.removeChild(this._tooltip);
        this._tooltip = null;
      }
    };

    const createTooltip = (target, tooltipText) => {
      const tooltip = document.createElement("div");
      tooltip.className = "custom-tooltip";
      tooltip.innerHTML = `
        <div class="tooltip-arrow"></div>
        <div class="tooltip-text">${tooltipText}</div>
      `;
      document.body.appendChild(tooltip);

      const rect = target.getBoundingClientRect();
      const tooltipRect = tooltip.getBoundingClientRect();
      const scrollX = window.scrollX, scrollY = window.scrollY;
      let left = rect.left + scrollX + (rect.width / 2) - (tooltipRect.width / 2);
      let top = rect.top + scrollY - tooltipRect.height - 8; // offset for arrow
      const arrow = tooltip.querySelector(".tooltip-arrow");
      let arrowLeft = "50%";

      if (left < scrollX) {
        left = scrollX + 5;
        arrowLeft = `${rect.left + scrollX + rect.width / 2 - left}px`;
      }
      if (left + tooltipRect.width > scrollX + window.innerWidth) {
        left = scrollX + window.innerWidth - tooltipRect.width - 5;
        arrowLeft = `${rect.left + scrollX + rect.width / 2 - left}px`;
      }
      if (top < scrollY) {
        top = rect.bottom + scrollY + 8;
        tooltip.classList.add("tooltip-bottom");
      } else {
        tooltip.classList.remove("tooltip-bottom");
      }

      tooltip.style.left = `${left}px`;
      tooltip.style.top = `${top}px`;
      arrow.style.left = arrowLeft;

      return tooltip;
    };

    document.querySelectorAll("[data-toltips], [data-toltips-disabled]").forEach(element => {
      element.addEventListener("mouseenter", function () {
        clearTimeout(this._tooltipTimeout);
        this._tooltipTimeout = setTimeout(() => {
          const tooltipText = this.hasAttribute("disabled")
            ? this.getAttribute("data-toltips-disabled")
            : this.getAttribute("data-toltips");
          if (!tooltipText) return;
          this._tooltip = createTooltip(this, tooltipText);

          const hideOnWindowChange = () => {
            removeTooltip.call(this);
            window.removeEventListener("scroll", hideOnWindowChange);
            window.removeEventListener("resize", hideOnWindowChange);
          };
          window.addEventListener("scroll", hideOnWindowChange);
          window.addEventListener("resize", hideOnWindowChange);
        }, 250);
      });
      element.addEventListener("mouseleave", removeTooltip);
      element.addEventListener("click", removeTooltip);
    });

    /* ============================================================
      Textarea Auto-Expand & Send
    ============================================================ */
    const userInput = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButtonMessage");
    if (userInput && sendButton) {
      const INITIAL_HEIGHT = "46px";
      const BASE_HEIGHT = "48px";

      const autoExpand = element => {
        element.style.height = BASE_HEIGHT;
        element.style.height = `${element.scrollHeight}px`;
      };

      const resetHeight = () => {
        userInput.style.height = INITIAL_HEIGHT;
      };

      const handleKeyPress = event => {
        if (event.key === "Enter" && !event.shiftKey) {
          event.preventDefault();
          if (typeof sendMessage === "function") {
            sendMessage();
          } else {
            sendButton.click();
          }
          resetHeight();
        }
      };

      userInput.addEventListener("input", () => autoExpand(userInput));
      userInput.addEventListener("keydown", handleKeyPress);
      sendButton.addEventListener("click", resetHeight);
    }

    /* ============================================================
      Chat Footer Hide/Show on Scroll
    ============================================================ */
    const chatFooter = document.querySelector(".chat-footer");
    if (chatFooter) {
      let lastScrollTop = 0;
      const scrollThreshold = window.innerHeight * 0.05;
      window.addEventListener("scroll", () => {
        const scrollTop = window.scrollY;
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const atBottom = scrollTop + clientHeight >= scrollHeight - 5; // 5px tolerance

        if (atBottom || scrollTop < lastScrollTop) {
          chatFooter.classList.remove("scrolle-down-hide");
        } else if (scrollTop > scrollThreshold) {
          chatFooter.classList.add("scrolle-down-hide");
        }
        lastScrollTop = scrollTop;
      });
    }

    /* ============================================================
      Placeholder Update & Message Check
    ============================================================ */
    const textareaForPlaceholder = document.getElementById("userInput");

    const updatePlaceholder = () => {
      if (!textareaForPlaceholder) return;
      let found = false;
      // Получаем плейсхолдеры из глобального конфигурационного объекта
      const placeholders = window.CONSTANTS && window.CONSTANTS.PLACEHOLDERS ? window.CONSTANTS.PLACEHOLDERS : {};
      for (const step in placeholders) {
        if (document.body.classList.contains(step)) {
          textareaForPlaceholder.placeholder = placeholders[step];
          found = true;
          break;
        }
      }
      if (!found) {
        textareaForPlaceholder.placeholder = "Enter your request...";
      }
    };

    const checkMessages = () => {
      document.body.classList.toggle("has-message", !!document.querySelector(".message-block"));
    };

    const observer = new MutationObserver(mutations => {
      let needUpdatePlaceholder = false;
      let needCheckMessages = false;
      mutations.forEach(mutation => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          needUpdatePlaceholder = true;
        }
        if (mutation.type === "childList") {
          needCheckMessages = true;
        }
      });
      if (needUpdatePlaceholder) updatePlaceholder();
      if (needCheckMessages) checkMessages();
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ["class"]
    });

    /* ============================================================
      Toggle Buttons for Help & Mikhail Panels
    ============================================================ */
    const toggleConfigs = [
      { btnSelector: ".help-btn", containerSelector: ".help-div", openClass: "open-help" },
      { btnSelector: ".mikhail-btn", containerSelector: ".mikhail-div", openClass: "open-mikhail" }
    ];

    // Mapping to close the other panel when one opens
    const closeMapping = {
      ".help-div": { other: ".mikhail-div", openClass: "open-mikhail" },
      ".mikhail-div": { other: ".help-div", openClass: "open-help" }
    };

    toggleConfigs.forEach(config => {
      const btn = document.querySelector(config.btnSelector);
      const container = document.querySelector(config.containerSelector);
      if (!btn || !container) return;

      btn.addEventListener("click", event => {
        event.stopPropagation();
        container.classList.toggle(config.openClass);

        // Close the paired container if open
        if (closeMapping[config.containerSelector]) {
          const { other, openClass } = closeMapping[config.containerSelector];
          const otherContainer = document.querySelector(other);
          if (otherContainer) {
            otherContainer.classList.remove(openClass);
            otherContainer.querySelectorAll("button").forEach(b => b.classList.remove("visible"));
          }
        }

        // Animate buttons inside the container if it's open
        const buttons = container.querySelectorAll("button");
        if (container.classList.contains(config.openClass)) {
          buttons.forEach(btn => btn.classList.remove("visible"));
          buttons.forEach((btn, index) => {
            setTimeout(() => btn.classList.add("visible"), index * 50);
          });
        } else {
          buttons.forEach(btn => btn.classList.remove("visible"));
        }
      });
    });

    // Global click handler to close toggle containers when clicking outside
    document.addEventListener("click", event => {
      toggleConfigs.forEach(config => {
        const container = document.querySelector(config.containerSelector);
        if (!container) return;
        if (!container.contains(event.target) || event.target.closest(`.${config.openClass}`)) {
          container.classList.remove(config.openClass);
          container.querySelectorAll("button").forEach(b => b.classList.remove("visible"));
        }
      });
    });
  });









(() => {
    const chatbox = document.getElementById("chatbox");
    if (!chatbox) {
        console.error("Элемент #chatbox не найден");
        return;
    }
    
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            mutation.addedNodes.forEach((node) => {
                if (node.nodeType === 1 && node.classList.contains("cancelled-message")) {
                    console.log("Найден новый cancelled-message:", node);
                    
                    // Попробуем получить предыдущего соседа напрямую
                    let messageBlock = node.previousElementSibling;
                    if (!messageBlock) {
                        console.log("previousElementSibling не найден, пробую node.parentElement.previousElementSibling");
                        messageBlock = node.parentElement ? node.parentElement.previousElementSibling : null;
                    }
                    
                    if (messageBlock && messageBlock.classList.contains("message-block")) {
                        messageBlock.classList.add("highlight-cancelled");
                        console.log("Класс highlight добавлен к:", messageBlock);
                    } else {
                        console.log("Не найден элемент message-block для:", node);
                    }
                }
            });
        });
    });
    
    observer.observe(chatbox, { childList: true, subtree: true });
})();



  </script>




  <script>
    (() => {
      // Создание canvas с необходимыми стилями
      const createCanvas = () => {
        const canvas = document.createElement("canvas");
        canvas.id = "canvas";
        Object.assign(canvas.style, {
          position: "fixed",
          top: "0",
          left: "0",
          width: "100%",
          height: "100%",
          pointerEvents: "none",
          zIndex: "1000" // поверх другого контента
        });
        document.body.appendChild(canvas);
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        return canvas;
      };
    
      // Удаление canvas
      const removeCanvas = () => {
        const canvas = document.getElementById("canvas");
        if (canvas) canvas.remove();
      };
    
      // Вспомогательная функция для генерации случайного числа в диапазоне
      const randomRange = (min, max) => Math.random() * (max - min) + min;
    
      // Параметры эффекта
      const confettiCount = 20;
      const sequinCount = 10;
      const gravityConfetti = 0.3;
      const gravitySequins = 0.55;
      const dragConfetti = 0.075;
      const dragSequins = 0.02;
      const terminalVelocity = 3;
      const colors = [
        { front: "#f2b11b", back: "#6245e0" },
        { front: "#e310c7", back: "#8fa5e5" },
        { front: "#5c86ff", back: "#345dd1" }
      ];
    
      // Инициализация начальной скорости конфетти
      const initConfettoVelocity = (xRange, yRange) => {
        const x = randomRange(...xRange);
        const range = yRange[1] - yRange[0] + 1;
        let y = yRange[1] - Math.abs(randomRange(0, range) + randomRange(0, range) - range);
        if (y >= yRange[1] - 1) {
          y += Math.random() < 0.25 ? randomRange(1, 3) : 0;
        }
        return { x, y: -y };
      };
    
      // Класс для конфетти
      class Confetto {
        constructor(avatarRect) {
          this.randomModifier = randomRange(0, 99);
          this.color = colors[Math.floor(randomRange(0, colors.length))];
          this.dimensions = {
            x: randomRange(5, 9),
            y: randomRange(8, 15)
          };
          this.position = {
            x: randomRange(avatarRect.left, avatarRect.right),
            y: avatarRect.bottom
          };
          this.rotation = randomRange(0, 2 * Math.PI);
          this.scale = { x: 1, y: 1 };
          this.velocity = initConfettoVelocity([-9, 9], [6, 11]);
        }
        update() {
          this.velocity.x -= this.velocity.x * dragConfetti;
          this.velocity.y = Math.min(this.velocity.y + gravityConfetti, terminalVelocity);
          this.velocity.x += Math.random() > 0.5 ? Math.random() : -Math.random();
          this.position.x += this.velocity.x;
          this.position.y += this.velocity.y;
          this.scale.y = Math.cos((this.position.y + this.randomModifier) * 0.09);
        }
      }
    
      // Класс для блёсток (sequins)
      class Sequin {
        constructor(avatarRect) {
          this.color = colors[Math.floor(randomRange(0, colors.length))].back;
          this.radius = randomRange(1, 2);
          this.position = {
            x: randomRange(avatarRect.left, avatarRect.right),
            y: avatarRect.bottom
          };
          this.velocity = {
            x: randomRange(-6, 6),
            y: randomRange(-8, -12)
          };
        }
        update() {
          this.velocity.x -= this.velocity.x * dragSequins;
          this.velocity.y += gravitySequins;
          this.position.x += this.velocity.x;
          this.position.y += this.velocity.y;
        }
      }
    
      // Запуск эффекта конфетти, используя координаты нижней границы аватара
      const startConfettiEffect = (avatar) => {
        const canvas = createCanvas();
        const ctx = canvas.getContext("2d");
        const avatarRect = avatar.getBoundingClientRect();
    
        // Создаем массивы конфетти и блесток
        let confetti = Array.from({ length: confettiCount }, () => new Confetto(avatarRect));
        let sequins = Array.from({ length: sequinCount }, () => new Sequin(avatarRect));
    
        let animationFrameId;
        let isRunning = true;
    
        const render = () => {
          if (!isRunning) return;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
    
          confetti.forEach(confetto => {
            const width = confetto.dimensions.x * confetto.scale.x;
            const height = confetto.dimensions.y * confetto.scale.y;
            ctx.save();
            ctx.translate(confetto.position.x, confetto.position.y);
            ctx.rotate(confetto.rotation);
            confetto.update();
            ctx.fillStyle = confetto.scale.y > 0 ? confetto.color.front : confetto.color.back;
            ctx.fillRect(-width / 2, -height / 2, width, height);
            ctx.restore();
          });
    
          sequins.forEach(sequin => {
            ctx.save();
            ctx.translate(sequin.position.x, sequin.position.y);
            sequin.update();
            ctx.fillStyle = sequin.color;
            ctx.beginPath();
            ctx.arc(0, 0, sequin.radius, 0, 2 * Math.PI);
            ctx.fill();
            ctx.restore();
          });
    
          // Удаляем объекты, вышедшие за пределы экрана
          confetti = confetti.filter(confetto => confetto.position.y < canvas.height);
          sequins = sequins.filter(sequin => sequin.position.y < canvas.height);
    
          animationFrameId = requestAnimationFrame(render);
        };
    
        render();
    
        // Останавливаем эффект через заданное время и удаляем canvas
        const effectDuration = 5000; // длительность эффекта в мс
        setTimeout(() => {
          isRunning = false;
          cancelAnimationFrame(animationFrameId);
          removeCanvas();
        }, effectDuration);
      };
    
      // Функция ожидания появления элемента аватара (.ava-mikhail)
      const waitForAvatar = () => new Promise(resolve => {
        const observer = new MutationObserver(() => {
          const avatar = document.querySelector(".ava-mikhail");
          if (avatar) {
            observer.disconnect();
            resolve(avatar);
          }
        });
        observer.observe(document.body, { childList: true, subtree: true });
      });
    
      // Ждем появления аватара и запускаем эффект
      waitForAvatar().then(startConfettiEffect);
    })();
  </script>


 <script>
  // document.body.addEventListener("click", function requestFullScreen() {
  //     let elem = document.documentElement;

  //     if (elem.requestFullscreen) {
  //         elem.requestFullscreen();
  //     } else if (elem.mozRequestFullScreen) { // Firefox
  //         elem.mozRequestFullScreen();
  //     } else if (elem.webkitRequestFullscreen) { // Chrome, Safari, Opera
  //         elem.webkitRequestFullscreen();
  //     } else if (elem.msRequestFullscreen) { // IE/Edge
  //         elem.msRequestFullscreen();
  //     }

  //     document.body.removeEventListener("click", requestFullScreen); // Удаляем обработчик после первого клика
  // });
 </script>

 <script>
  const observer = new MutationObserver((mutationsList, observer) => {
      for (const mutation of mutationsList) {
          if (mutation.type === 'childList') {
              const button = document.getElementById('loadImageButton');
              if (button) {
                  observer.disconnect(); // Останавливаем наблюдатель после обнаружения кнопки
                  loadScript();
              }
          }
      }
  });

  // Начинаем наблюдение за `body` (или за конкретным контейнером, если известно место появления кнопки)
  observer.observe(document.body, { childList: true, subtree: true });

  function loadScript() {
      const script = document.createElement('script');
      script.src = 'index-file/loadImageButton.js'; // Укажи путь к своему скрипту
      script.async = true;
      document.body.appendChild(script);
  }
 </script>
</body>
</html>
