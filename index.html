<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Светлая тема -->
    <link rel="icon" href="index-file/favicon/favicon-light.png" type="image/png" media="(prefers-color-scheme: light)">
    <link rel="icon" href="index-file/favicon-light.svg" type="image/svg+xml" media="(prefers-color-scheme: light)">
    <!-- Тёмная тема -->
    <link rel="icon" href="index-file/favicon/favicon-dark.png" type="image/png" media="(prefers-color-scheme: dark)">
    <link rel="icon" href="index-file/favicon/favicon-dark.svg" type="image/svg+xml" media="(prefers-color-scheme: dark)">


    <title>Web — Dev&Des</title>    
    <script>
    // function loadStylesheet() {
    //     var link = document.createElement("link");
    //     link.rel = "stylesheet";
    //     link.href = "index-file/styles.css?v=" + new Date().getTime();
    //     document.head.appendChild(link);
    // }

    // loadStylesheet();
</script>
<link rel="stylesheet" href="index-file/styles.css">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    

</head>
<body>
  <div class="chat-div">
    <div class="hi">
      <h1>How can I help?</h1>
      <p class="hi"><p>
        <script>
          document.addEventListener("DOMContentLoaded", function() {
          const hiP = document.querySelector("p.hi");
          if (!hiP) {
            return;
          }
          const variants = [
            "I am an AI assistant created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button> to help you with web development.",
            "I am a virtual AI developed by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button> to quickly answer web development questions.",
            "Get quick web development tips with the help of an AI assistant created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button>.",
            "Got web development questions? I am an AI created by <button class='preset-button btn-link' data-text='Who is Mikhail?'>Mikhail</button>, ready to help."
          ];
            const randomText = variants[Math.floor(Math.random() * variants.length)];
            hiP.innerHTML = randomText;
          });
        </script>
    </div>
    <div id="chatbox"></div>
    <div class="chat-footer">
        <div class="help-div">
          <button class="preset-button btn-secondary not-send" data-text="How to check if a file exists in PHP?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to check if a file exists in PHP?</span></button>
          <button class="preset-button btn-secondary not-send" data-text="How to remove duplicates from an array in JavaScript?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to remove duplicates from an array in JavaScript?</span>
          </button>
          <button class="preset-button btn-secondary not-send" data-text="How to create a smooth fade-in effect on page load in CSS?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to create a smooth fade-in effect on page load in CSS?</span></button>
          <button class="preset-button btn-secondary not-send" data-text="How to display the current date and time in Python?"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-full w-full"><path d="M20 8L12.5 15.5L8.5 11.5L3 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 7H21V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span>How to display the current date and time in Python?</span></button>
        </div>

        <div class="mikhail-div">
          <button class="preset-button btn-secondary" data-text="view Mikhail's portfolio"><svg width="18" height="18" viewBox="0 0 40 40" fill="none">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5" d="M33.75 23.583v7.084c0 1.824-1.312 3.393-3.12 3.633-3.478.462-7.026.7-10.63.7-3.604 0-7.152-.238-10.63-.7-1.809-.24-3.12-1.81-3.12-3.633v-7.084m27.5 0c.786-.67 1.25-1.685 1.25-2.768v-6.306c0-1.801-1.28-3.358-3.062-3.624a80.185 80.185 0 00-5.688-.644m7.5 13.342c-.323.275-.7.492-1.121.633A39.959 39.959 0 0120 26.25a39.96 39.96 0 01-12.629-2.034 3.358 3.358 0 01-1.121-.633m0 0C5.463 22.913 5 21.898 5 20.815v-6.306c0-1.801 1.28-3.358 3.062-3.624a80.189 80.189 0 015.688-.644m12.5 0V8.75A3.75 3.75 0 0022.5 5h-5a3.75 3.75 0 00-3.75 3.75v1.49m12.5 0a81.147 81.147 0 00-12.5 0M20 21.25h.012v.012H20v-.012z"/></svg><span>Who I Am <span class="vertical-line-keyboard">|</span> Portfolio</span></button>
          <button class="preset-button btn-secondary" data-text="Send a message to Mikhail"><svg width="18" height="18" viewBox="0 0 40 40" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5" d="M14.375 16.25a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0h-.625m6.875 0a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0H20m6.875 0a.625.625 0 11-1.25 0 .625.625 0 011.25 0zm0 0h-.625m-22.5 5.016c0 2.668 1.872 4.99 4.512 5.379 1.81.266 3.64.472 5.488.614V35l6.973-6.973a1.9 1.9 0 011.296-.552 80.477 80.477 0 009.719-.83c2.64-.388 4.512-2.71 4.512-5.38v-10.03c0-2.67-1.872-4.992-4.512-5.38A80.656 80.656 0 0020 5c-3.987 0-7.906.292-11.738.855-2.64.388-4.512 2.71-4.512 5.38v10.03z"/></svg><span>Write to Mikhail</span></button>
          <button class="preset-button btn-secondary" data-text="Help Ukraine Achieve Peace and Freedom. Stand with Ukraine for its right to sovereignty and independence.">
<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M10.8571 7.15694C13.6177 5.17267 14.9051 4.83631 16 7.56602C11.2857 6.33979 14.7146 18.6123 2.28572 12.0659C0.571429 10.8397 5.71429 12.0464 7 10C0.571429 6.72835 6.19409 5.62438 1 3.88427C4.81028 2.19745 6.96052 2.73373 10.8571 7.15694Z" stroke="currentColor" stroke-width="1.57" stroke-linejoin="round"/>
<path d="M11 7C11.5 2.5 8.94738 2.22396 7 1.5L7.5 4" stroke="currentColor" stroke-width="1.57" stroke-linejoin="round"/>
</svg><span>Help Ukraine Achieve Peace and Freedom</span></button>
        </div>
        <div class="userInput">
            <textarea id="userInput" autofocus placeholder="Enter your request..." oninput="toggleButtonState();"></textarea>
            <div class="userInputBTN">
                <div>
                    <button class="preset-button btn-secondary help-btn" data-toltips="What and how to ask the AI ​​assistant" ><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-[18px] w-[18px]"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM11.9851 4.00291C11.9933 4.00046 11.9982 4.00006 11.9996 4C12.001 4.00006 12.0067 4.00046 12.0149 4.00291C12.0256 4.00615 12.047 4.01416 12.079 4.03356C12.2092 4.11248 12.4258 4.32444 12.675 4.77696C12.9161 5.21453 13.1479 5.8046 13.3486 6.53263C13.6852 7.75315 13.9156 9.29169 13.981 11H10.019C10.0844 9.29169 10.3148 7.75315 10.6514 6.53263C10.8521 5.8046 11.0839 5.21453 11.325 4.77696C11.5742 4.32444 11.7908 4.11248 11.921 4.03356C11.953 4.01416 11.9744 4.00615 11.9851 4.00291ZM8.01766 11C8.08396 9.13314 8.33431 7.41167 8.72334 6.00094C8.87366 5.45584 9.04762 4.94639 9.24523 4.48694C6.48462 5.49946 4.43722 7.9901 4.06189 11H8.01766ZM4.06189 13H8.01766C8.09487 15.1737 8.42177 17.1555 8.93 18.6802C9.02641 18.9694 9.13134 19.2483 9.24522 19.5131C6.48461 18.5005 4.43722 16.0099 4.06189 13ZM10.019 13H13.981C13.9045 14.9972 13.6027 16.7574 13.1726 18.0477C12.9206 18.8038 12.6425 19.3436 12.3823 19.6737C12.2545 19.8359 12.1506 19.9225 12.0814 19.9649C12.0485 19.9852 12.0264 19.9935 12.0153 19.9969C12.0049 20.0001 11.9999 20 11.9999 20C11.9999 20 11.9948 20 11.9847 19.9969C11.9736 19.9935 11.9515 19.9852 11.9186 19.9649C11.8494 19.9225 11.7455 19.8359 11.6177 19.6737C11.3575 19.3436 11.0794 18.8038 10.8274 18.0477C10.3973 16.7574 10.0955 14.9972 10.019 13ZM15.9823 13C15.9051 15.1737 15.5782 17.1555 15.07 18.6802C14.9736 18.9694 14.8687 19.2483 14.7548 19.5131C17.5154 18.5005 19.5628 16.0099 19.9381 13H15.9823ZM19.9381 11C19.5628 7.99009 17.5154 5.49946 14.7548 4.48694C14.9524 4.94639 15.1263 5.45584 15.2767 6.00094C15.6657 7.41167 15.916 9.13314 15.9823 11H19.9381Z" fill="currentColor"></path></svg><span>Examples of queries</span></button>  
                    <button class="preset-button btn-secondary mikhail-btn" data-toltips="Who I Am | Portfolio | Contacts" ><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.4008 3.76687C12.1453 3.65508 11.8547 3.65508 11.5992 3.76687L5.59918 6.39187C5.23519 6.55112 5 6.91073 5 7.30803V13C5 14.7136 5.61571 16.2833 6.63795 17.5001C7.92137 15.9724 9.84647 15 11.9999 15C14.1534 15 16.0785 15.9724 17.3619 17.5002C18.3843 16.2834 19 14.7136 19 13V7.30803C19 6.91073 18.7648 6.55112 18.4008 6.39187L12.4008 3.76687ZM15.8701 18.8338C14.9525 17.7135 13.5589 17 11.9999 17C10.441 17 9.04741 17.7135 8.12979 18.8337C9.23837 19.5706 10.569 20 12 20C13.4309 20 14.7615 19.5707 15.8701 18.8338ZM10.7975 1.93456C11.5641 1.59919 12.4359 1.59919 13.2025 1.93456L19.2025 4.55956C20.2944 5.03729 21 6.11614 21 7.30803V13C21 17.9706 16.9706 22 12 22C7.02944 22 3 17.9706 3 13V7.30803C3 6.11614 3.70558 5.03729 4.79754 4.55956L10.7975 1.93456ZM12 8.5C11.0335 8.5 10.25 9.2835 10.25 10.25C10.25 11.2165 11.0335 12 12 12C12.9665 12 13.75 11.2165 13.75 10.25C13.75 9.2835 12.9665 8.5 12 8.5ZM8.25 10.25C8.25 8.17893 9.92893 6.5 12 6.5C14.0711 6.5 15.75 8.17893 15.75 10.25C15.75 12.3211 14.0711 14 12 14C9.92893 14 8.25 12.3211 8.25 10.25Z" fill="currentColor"></path></svg><span>About Mikhail</span></button>
                    <button id="cancelStepsButton" class="btn-secondary cancel-button"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.63603 5.63604C6.02656 5.24552 6.65972 5.24552 7.05025 5.63604L12 10.5858L16.9497 5.63604C17.3403 5.24552 17.9734 5.24552 18.364 5.63604C18.7545 6.02657 18.7545 6.65973 18.364 7.05025L13.4142 12L18.364 16.9497C18.7545 17.3403 18.7545 17.9734 18.364 18.364C17.9734 18.7545 17.3403 18.7545 16.9497 18.364L12 13.4142L7.05025 18.364C6.65972 18.7545 6.02656 18.7545 5.63603 18.364C5.24551 17.9734 5.24551 17.3403 5.63603 16.9497L10.5858 12L5.63603 7.05025C5.24551 6.65973 5.24551 6.02657 5.63603 5.63604Z" fill="currentColor"></path></svg><span>Cancel</span></button>
                </div>
                <div>
                    <button onclick="sendMessage()" id="sendButtonMessage" class="btn-primary" data-toltips="Send text to chat" data-toltips-disabled="This is an empty message" disabled><span>Send</span><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-2xl"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.1918 8.90615C15.6381 8.45983 16.3618 8.45983 16.8081 8.90615L21.9509 14.049C22.3972 14.4953 22.3972 15.2189 21.9509 15.6652C21.5046 16.1116 20.781 16.1116 20.3347 15.6652L17.1428 12.4734V22.2857C17.1428 22.9169 16.6311 23.4286 15.9999 23.4286C15.3688 23.4286 14.8571 22.9169 14.8571 22.2857V12.4734L11.6652 15.6652C11.2189 16.1116 10.4953 16.1116 10.049 15.6652C9.60265 15.2189 9.60265 14.4953 10.049 14.049L15.1918 8.90615Z" fill="currentColor"></path></svg></button>
                </div>
            </div>
        </div>
      <p>The AI assistant may make mistakes. <button class="preset-button btn-link" data-text="contact Mikhail"><span>Contact Mikhail</span></button> — he will better understand your needs.</p>
    </div>
  </div>




<script>
  function loadConfig(callback) {
    var script = document.createElement("script");
    script.src = "index-file/config.js?v=" + new Date().getTime();
    script.onload = callback; // Ждём загрузки перед вызовом chat-gpt.js
    document.head.appendChild(script);
  }

  loadConfig(function(){
    var script = document.createElement("script");
    script.src = "index-file/chat-gpt.js?v=" + new Date().getTime();
    document.head.appendChild(script);
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    /* ============================================================
      Tooltip Functionality
    ============================================================ */
    const removeTooltip = function () {
      clearTimeout(this._tooltipTimeout);
      if (this._tooltip) {
        document.body.removeChild(this._tooltip);
        this._tooltip = null;
      }
    };

    const createTooltip = (target, tooltipText) => {
      const tooltip = document.createElement("div");
      tooltip.className = "custom-tooltip";
      tooltip.innerHTML = `
        <div class="tooltip-arrow"></div>
        <div class="tooltip-text">${tooltipText}</div>
      `;
      document.body.appendChild(tooltip);

      const rect = target.getBoundingClientRect();
      const tooltipRect = tooltip.getBoundingClientRect();
      const scrollX = window.scrollX, scrollY = window.scrollY;
      let left = rect.left + scrollX + (rect.width / 2) - (tooltipRect.width / 2);
      let top = rect.top + scrollY - tooltipRect.height - 8; // offset for arrow
      const arrow = tooltip.querySelector(".tooltip-arrow");
      let arrowLeft = "50%";

      if (left < scrollX) {
        left = scrollX + 5;
        arrowLeft = `${rect.left + scrollX + rect.width / 2 - left}px`;
      }
      if (left + tooltipRect.width > scrollX + window.innerWidth) {
        left = scrollX + window.innerWidth - tooltipRect.width - 5;
        arrowLeft = `${rect.left + scrollX + rect.width / 2 - left}px`;
      }
      if (top < scrollY) {
        top = rect.bottom + scrollY + 8;
        tooltip.classList.add("tooltip-bottom");
      } else {
        tooltip.classList.remove("tooltip-bottom");
      }

      tooltip.style.left = `${left}px`;
      tooltip.style.top = `${top}px`;
      arrow.style.left = arrowLeft;

      return tooltip;
    };

    document.querySelectorAll("[data-toltips], [data-toltips-disabled]").forEach(element => {
      element.addEventListener("mouseenter", function () {
        clearTimeout(this._tooltipTimeout);
        this._tooltipTimeout = setTimeout(() => {
          const tooltipText = this.hasAttribute("disabled")
            ? this.getAttribute("data-toltips-disabled")
            : this.getAttribute("data-toltips");
          if (!tooltipText) return;
          this._tooltip = createTooltip(this, tooltipText);

          const hideOnWindowChange = () => {
            removeTooltip.call(this);
            window.removeEventListener("scroll", hideOnWindowChange);
            window.removeEventListener("resize", hideOnWindowChange);
          };
          window.addEventListener("scroll", hideOnWindowChange);
          window.addEventListener("resize", hideOnWindowChange);
        }, 250);
      });
      element.addEventListener("mouseleave", removeTooltip);
      element.addEventListener("click", removeTooltip);
    });

    /* ============================================================
      Textarea Auto-Expand & Send
    ============================================================ */
    const userInput = document.getElementById("userInput");
    const sendButton = document.getElementById("sendButtonMessage");
    if (userInput && sendButton) {
      const INITIAL_HEIGHT = "54px";
      const BASE_HEIGHT = "56px";

      const autoExpand = element => {
        element.style.height = BASE_HEIGHT;
        element.style.height = `${element.scrollHeight}px`;
      };

      const resetHeight = () => {
        userInput.style.height = INITIAL_HEIGHT;
      };

      const handleKeyPress = event => {
        if (event.key === "Enter" && !event.shiftKey) {
          event.preventDefault();
          if (typeof sendMessage === "function") {
            sendMessage();
          } else {
            sendButton.click();
          }
          resetHeight();
        }
      };

      userInput.addEventListener("input", () => autoExpand(userInput));
      userInput.addEventListener("keydown", handleKeyPress);
      sendButton.addEventListener("click", resetHeight);
    }

    /* ============================================================
      Chat Footer Hide/Show on Scroll
    ============================================================ */
    const chatFooter = document.querySelector(".chat-footer");
    if (chatFooter) {
      let lastScrollTop = 0;
      const scrollThreshold = window.innerHeight * 0.05;
      window.addEventListener("scroll", () => {
        const scrollTop = window.scrollY;
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const atBottom = scrollTop + clientHeight >= scrollHeight - 5; // 5px tolerance

        if (atBottom || scrollTop < lastScrollTop) {
          chatFooter.classList.remove("scrolle-down-hide");
        } else if (scrollTop > scrollThreshold) {
          chatFooter.classList.add("scrolle-down-hide");
        }
        lastScrollTop = scrollTop;
      });
    }

    /* ============================================================
      Placeholder Update & Message Check
    ============================================================ */
    const textareaForPlaceholder = document.getElementById("userInput");

    const updatePlaceholder = () => {
      if (!textareaForPlaceholder) return;
      let found = false;
      // Получаем плейсхолдеры из глобального конфигурационного объекта
      const placeholders = window.CONSTANTS && window.CONSTANTS.PLACEHOLDERS ? window.CONSTANTS.PLACEHOLDERS : {};
      for (const step in placeholders) {
        if (document.body.classList.contains(step)) {
          textareaForPlaceholder.placeholder = placeholders[step];
          found = true;
          break;
        }
      }
      if (!found) {
        textareaForPlaceholder.placeholder = "Enter your request...";
      }
    };

    const checkMessages = () => {
      document.body.classList.toggle("has-message", !!document.querySelector(".message-block"));
    };

    const observer = new MutationObserver(mutations => {
      let needUpdatePlaceholder = false;
      let needCheckMessages = false;
      mutations.forEach(mutation => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          needUpdatePlaceholder = true;
        }
        if (mutation.type === "childList") {
          needCheckMessages = true;
        }
      });
      if (needUpdatePlaceholder) updatePlaceholder();
      if (needCheckMessages) checkMessages();
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ["class"]
    });

    /* ============================================================
      Toggle Buttons for Help & Mikhail Panels
    ============================================================ */
    const toggleConfigs = [
      { btnSelector: ".help-btn", containerSelector: ".help-div", openClass: "open-help" },
      { btnSelector: ".mikhail-btn", containerSelector: ".mikhail-div", openClass: "open-mikhail" }
    ];

    // Mapping to close the other panel when one opens
    const closeMapping = {
      ".help-div": { other: ".mikhail-div", openClass: "open-mikhail" },
      ".mikhail-div": { other: ".help-div", openClass: "open-help" }
    };

    toggleConfigs.forEach(config => {
      const btn = document.querySelector(config.btnSelector);
      const container = document.querySelector(config.containerSelector);
      if (!btn || !container) return;

      btn.addEventListener("click", event => {
        event.stopPropagation();
        container.classList.toggle(config.openClass);

        // Close the paired container if open
        if (closeMapping[config.containerSelector]) {
          const { other, openClass } = closeMapping[config.containerSelector];
          const otherContainer = document.querySelector(other);
          if (otherContainer) {
            otherContainer.classList.remove(openClass);
            otherContainer.querySelectorAll("button").forEach(b => b.classList.remove("visible"));
          }
        }

        // Animate buttons inside the container if it's open
        const buttons = container.querySelectorAll("button");
        if (container.classList.contains(config.openClass)) {
          buttons.forEach(btn => btn.classList.remove("visible"));
          buttons.forEach((btn, index) => {
            setTimeout(() => btn.classList.add("visible"), index * 50);
          });
        } else {
          buttons.forEach(btn => btn.classList.remove("visible"));
        }
      });
    });

    // Global click handler to close toggle containers when clicking outside
    document.addEventListener("click", event => {
      toggleConfigs.forEach(config => {
        const container = document.querySelector(config.containerSelector);
        if (!container) return;
        if (!container.contains(event.target) || event.target.closest(`.${config.openClass}`)) {
          container.classList.remove(config.openClass);
          container.querySelectorAll("button").forEach(b => b.classList.remove("visible"));
        }
      });
    });
  });
  </script>




  <script>
    (() => {
      // Создание canvas с необходимыми стилями
      const createCanvas = () => {
        const canvas = document.createElement("canvas");
        canvas.id = "canvas";
        Object.assign(canvas.style, {
          position: "fixed",
          top: "0",
          left: "0",
          width: "100%",
          height: "100%",
          zIndex: "1000" // поверх другого контента
        });
        document.body.appendChild(canvas);
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        return canvas;
      };
    
      // Удаление canvas
      const removeCanvas = () => {
        const canvas = document.getElementById("canvas");
        if (canvas) canvas.remove();
      };
    
      // Вспомогательная функция для генерации случайного числа в диапазоне
      const randomRange = (min, max) => Math.random() * (max - min) + min;
    
      // Параметры эффекта
      const confettiCount = 20;
      const sequinCount = 10;
      const gravityConfetti = 0.3;
      const gravitySequins = 0.55;
      const dragConfetti = 0.075;
      const dragSequins = 0.02;
      const terminalVelocity = 3;
      const colors = [
        { front: "#f2b11b", back: "#6245e0" },
        { front: "#e310c7", back: "#8fa5e5" },
        { front: "#5c86ff", back: "#345dd1" }
      ];
    
      // Инициализация начальной скорости конфетти
      const initConfettoVelocity = (xRange, yRange) => {
        const x = randomRange(...xRange);
        const range = yRange[1] - yRange[0] + 1;
        let y = yRange[1] - Math.abs(randomRange(0, range) + randomRange(0, range) - range);
        if (y >= yRange[1] - 1) {
          y += Math.random() < 0.25 ? randomRange(1, 3) : 0;
        }
        return { x, y: -y };
      };
    
      // Класс для конфетти
      class Confetto {
        constructor(avatarRect) {
          this.randomModifier = randomRange(0, 99);
          this.color = colors[Math.floor(randomRange(0, colors.length))];
          this.dimensions = {
            x: randomRange(5, 9),
            y: randomRange(8, 15)
          };
          this.position = {
            x: randomRange(avatarRect.left, avatarRect.right),
            y: avatarRect.bottom
          };
          this.rotation = randomRange(0, 2 * Math.PI);
          this.scale = { x: 1, y: 1 };
          this.velocity = initConfettoVelocity([-9, 9], [6, 11]);
        }
        update() {
          this.velocity.x -= this.velocity.x * dragConfetti;
          this.velocity.y = Math.min(this.velocity.y + gravityConfetti, terminalVelocity);
          this.velocity.x += Math.random() > 0.5 ? Math.random() : -Math.random();
          this.position.x += this.velocity.x;
          this.position.y += this.velocity.y;
          this.scale.y = Math.cos((this.position.y + this.randomModifier) * 0.09);
        }
      }
    
      // Класс для блёсток (sequins)
      class Sequin {
        constructor(avatarRect) {
          this.color = colors[Math.floor(randomRange(0, colors.length))].back;
          this.radius = randomRange(1, 2);
          this.position = {
            x: randomRange(avatarRect.left, avatarRect.right),
            y: avatarRect.bottom
          };
          this.velocity = {
            x: randomRange(-6, 6),
            y: randomRange(-8, -12)
          };
        }
        update() {
          this.velocity.x -= this.velocity.x * dragSequins;
          this.velocity.y += gravitySequins;
          this.position.x += this.velocity.x;
          this.position.y += this.velocity.y;
        }
      }
    
      // Запуск эффекта конфетти, используя координаты нижней границы аватара
      const startConfettiEffect = (avatar) => {
        const canvas = createCanvas();
        const ctx = canvas.getContext("2d");
        const avatarRect = avatar.getBoundingClientRect();
    
        // Создаем массивы конфетти и блесток
        let confetti = Array.from({ length: confettiCount }, () => new Confetto(avatarRect));
        let sequins = Array.from({ length: sequinCount }, () => new Sequin(avatarRect));
    
        let animationFrameId;
        let isRunning = true;
    
        const render = () => {
          if (!isRunning) return;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
    
          confetti.forEach(confetto => {
            const width = confetto.dimensions.x * confetto.scale.x;
            const height = confetto.dimensions.y * confetto.scale.y;
            ctx.save();
            ctx.translate(confetto.position.x, confetto.position.y);
            ctx.rotate(confetto.rotation);
            confetto.update();
            ctx.fillStyle = confetto.scale.y > 0 ? confetto.color.front : confetto.color.back;
            ctx.fillRect(-width / 2, -height / 2, width, height);
            ctx.restore();
          });
    
          sequins.forEach(sequin => {
            ctx.save();
            ctx.translate(sequin.position.x, sequin.position.y);
            sequin.update();
            ctx.fillStyle = sequin.color;
            ctx.beginPath();
            ctx.arc(0, 0, sequin.radius, 0, 2 * Math.PI);
            ctx.fill();
            ctx.restore();
          });
    
          // Удаляем объекты, вышедшие за пределы экрана
          confetti = confetti.filter(confetto => confetto.position.y < canvas.height);
          sequins = sequins.filter(sequin => sequin.position.y < canvas.height);
    
          animationFrameId = requestAnimationFrame(render);
        };
    
        render();
    
        // Останавливаем эффект через заданное время и удаляем canvas
        const effectDuration = 5000; // длительность эффекта в мс
        setTimeout(() => {
          isRunning = false;
          cancelAnimationFrame(animationFrameId);
          removeCanvas();
        }, effectDuration);
      };
    
      // Функция ожидания появления элемента аватара (.ava-mikhail)
      const waitForAvatar = () => new Promise(resolve => {
        const observer = new MutationObserver(() => {
          const avatar = document.querySelector(".ava-mikhail");
          if (avatar) {
            observer.disconnect();
            resolve(avatar);
          }
        });
        observer.observe(document.body, { childList: true, subtree: true });
      });
    
      // Ждем появления аватара и запускаем эффект
      waitForAvatar().then(startConfettiEffect);
    })();
  </script>


 <script>
  // document.body.addEventListener("click", function requestFullScreen() {
  //     let elem = document.documentElement;

  //     if (elem.requestFullscreen) {
  //         elem.requestFullscreen();
  //     } else if (elem.mozRequestFullScreen) { // Firefox
  //         elem.mozRequestFullScreen();
  //     } else if (elem.webkitRequestFullscreen) { // Chrome, Safari, Opera
  //         elem.webkitRequestFullscreen();
  //     } else if (elem.msRequestFullscreen) { // IE/Edge
  //         elem.msRequestFullscreen();
  //     }

  //     document.body.removeEventListener("click", requestFullScreen); // Удаляем обработчик после первого клика
  // });
 </script>

 <script>
  const observer = new MutationObserver((mutationsList, observer) => {
      for (const mutation of mutationsList) {
          if (mutation.type === 'childList') {
              const button = document.getElementById('loadImageButton');
              if (button) {
                  observer.disconnect(); // Останавливаем наблюдатель после обнаружения кнопки
                  loadScript();
              }
          }
      }
  });

  // Начинаем наблюдение за `body` (или за конкретным контейнером, если известно место появления кнопки)
  observer.observe(document.body, { childList: true, subtree: true });

  function loadScript() {
      const script = document.createElement('script');
      script.src = 'index-file/loadImageButton.js'; // Укажи путь к своему скрипту
      script.async = true;
      document.body.appendChild(script);
  }
 </script>
</body>
</html>
